{% extends "base.html" %}
{% block content %}
  <section class="hero">
    <img src="{{ url_for('static', filename='welcome_hero.svg') }}" alt="Watermelon illustration" />
    <div>
      <h2>Welcome</h2>
      <p>Enter your name to start ordering.</p>
    </div>
  </section>
  <div class="card card-hero login-card">
    {% if error %}
      <p class="error">{{ error }}</p>
    {% endif %}
    <form class="login-form" method="post" action="{{ url_for('employee_login_submit', token=employee_token) }}">
      <label class="menu-title">I am a</label>
      <div class="role-options">
        <label class="role-option">
          <input type="radio" name="role" value="employee" checked />
          <span>Employee</span>
        </label>
        <label class="role-option">
          <input type="radio" name="role" value="chef" />
          <span>Chef</span>
        </label>
      </div>

      <div id="name-field">
        <label for="employee_name">Your name</label>
        <input
          id="employee_name"
          name="employee_name"
          type="text"
          placeholder="Jane Doe"
          class="login-input"
        />
      </div>
      <button type="submit">Continue</button>
    </form>
    <script>
      const roleInputs = document.querySelectorAll('input[name="role"]');
      const nameInput = document.getElementById("employee_name");
      const nameField = document.getElementById("name-field");
      const updateNameRequired = () => {
        const role = document.querySelector('input[name="role"]:checked')?.value;
        if (!nameInput) return;
        if (role === "chef") {
          nameInput.required = false;
          nameInput.disabled = true;
          nameInput.value = "";
          if (nameField) nameField.classList.add("hidden");
        } else {
          nameInput.disabled = false;
          nameInput.required = true;
          if (nameField) nameField.classList.remove("hidden");
        }
      };
      roleInputs.forEach((input) => input.addEventListener("change", updateNameRequired));
      updateNameRequired();
    </script>
  </div>
{% endblock %}
