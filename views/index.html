{% extends "base.html" %}
{% block content %}
  <section class="hero">
    <img src="{{ url_for('static', filename='food_hero.svg') }}" alt="Salad bowl illustration" />
    <div>
      <h2>Fresh Desk Dining</h2>
      <p>Share your name and order. The chef handles the rest.</p>
    </div>
  </section>
  <div id="lunch-ready-banner" class="notice hidden" data-api-base="/api/employee/{{ employee_token }}">
    Lunch is ready.
  </div>
  <div id="mate-order-banner" class="notice hidden" data-api-base="/api/employee/{{ employee_token }}"></div>
  <div id="ring-banner" class="notice hidden"></div>
  <div id="my-orders-list" class="card order-card hidden"></div>
  <div id="mate-orders-list" class="card order-card hidden"></div>
  <div class="card card-hero">
    <p class="muted">
      Order whatever you like. It will be served at your desk.
    </p>
    {% if error %}
      <p class="error">{{ error }}</p>
    {% endif %}
    <p class="muted">
      Signed in as <strong>{{ employee_name }}</strong>.
      <a href="{{ url_for('employee_logout', token=employee_token) }}">Change name</a>
    </p>
    <div id="preset-list" class="preset-list" data-api-base="/api/employee/{{ employee_token }}"></div>
    <form class="order-form" method="post" action="{{ url_for('place_order', token=employee_token) }}">
      <label class="menu-title">Menu</label>
      <div class="menu-grid" data-api-base="/api/employee/{{ employee_token }}">
        <p class="muted">Loading menu...</p>
      </div>

      <label>Selected Items</label>
      <div id="cart-list" class="cart-list"></div>
      <input type="hidden" id="order_items_json" name="order_items_json" />

      <label for="mate_name">Order for a mate (optional)</label>
      <input
        id="mate_name"
        name="mate_name"
        type="text"
        placeholder="Mate name"
        value="{{ mate_name or '' }}"
      />

      <label for="requirements">Additional requirements</label>
      <textarea
        id="requirements"
        name="requirements"
        rows="3"
        placeholder="Example: No onions, allergy to peanuts"
      >{{ requirements or '' }}</textarea>

      <label>Voice message (optional)</label>
      <div class="voice-controls">
        <button type="button" class="notify-button" id="voice-start">Start recording</button>
        <button type="button" class="notify-button" id="voice-stop" disabled>Stop</button>
        <button type="button" class="notify-button" id="voice-discard" disabled>Discard</button>
        <div id="voice-wave" class="voice-wave hidden" aria-hidden="true">
          <span></span><span></span><span></span><span></span><span></span>
        </div>
        <audio id="voice-preview" controls class="hidden"></audio>
      </div>
      <input id="voice_message" name="voice_message" type="file" accept="audio/*" class="hidden" />

      <button type="button" class="notify-button" id="ring-chef">Ring Chef</button>
      <button type="submit">Place Order</button>
    </form>
  </div>
  <script src="{{ url_for('static', filename='employee.js') }}"></script>
{% endblock %}
